
linux 命令处理批量改名操作
分类： 技术天下 2013-07-13 23:37 719人阅读 评论(0) 收藏 举报

很多时候我们需要在一个文件夹内把文件重命名，如果很多，并且有子文件夹的情况这样手动操作比较复杂。

所以我们今天用linxu里面的find +awk+xargs+mv这个几个命令组合

假如我们需要替换的文件后缀名为.xxx，我们想替换成.ip

那么我们分解命令逐个记录：

1：查找到.xxx后缀的文件

命令: find  . -name *.xxx

解释: find 后的第一个参数为操作的文件夹，.的话表示当前目录，如果其他目录请直接写目录路径。接下来的-name为指定用后面的字符串匹配名称，还有其他比如创建时间匹配等待。 另外一个常用的命令就是-type 这个指定搜索的类型 比如 find  . -type d -name *.xxx 就是搜文件夹名称为*.xxx


2：提取文件名

命令:awk -F "." '{print $2}'

解释：awk的命令是用来处理字符串的，这里仅仅使用简单的-F 命令，也就是字符串分割。 -F有两个参数，一个是分隔符，这里用.为分隔符，另一个是prog，就是分割后的处理。这句的意思就是把字符串用.分割，并且把分割后的第$2段输出。这里有个注意的地方就是$2，为什么是$2?因为find命令查找出来的结果是‘./ABC.xxx’。也就是有两个'.' 所以取第二段。如果取完整段用$0，更多细节请参看网上文档


3：重命名文件

命令:mv ./abc.xxx ./abc.ip

解释：mv命令可以做移动，也可以重命名，就看前后的类型。如果后面是文件夹，则移动，后面是文件则重命名。这里不多更多解释。



我们用以上几个命令结合xargs管道连接起来，最终的命令为：

 find . -name '*.xxx'| awk -F "." '{print $2}'|xargs -I'{}'  mv ./{}.xxx ./{}.ip

这里需要解释的就是xargs，这个函数是把管道入口的命令进行逐条处理，用-I'{}'指定逐条的字符串为{}，然后用mv进行重命名

这样我们就实现了整个功能，比写脚本更简单。


[end]
