
维护服务器经验谈


到现在做运维有三个月时间了，从不熟悉到熟悉，从什么都不清楚到清楚手里所有服务器状态，从什么都不会到独立运维十几台服务器，独立搭建监控平台，独立制定了完整的一套打包备份策略。部门的运维只有我一个人做，所以什么问题都由我处理，在累之外的好处就是我能接触的多，能学的多，这对个人能力的提升是有帮助的。日子也过得比较闷，随便做点总结吧，算是对三个月里技术之外自我提升的证明。

1、工欲善其事，必先利其器。先对自己用的电脑配置一下，保证其能方便操作。

2、添加虚拟主机时Option使用“-index”，禁止列目录。

3、有新站需要上线时请衡量一下服务器承受能力后做安排。尤其注意不要在低内存的服务器上放过多站点，在低内存主机上也要留意mysql内存分配问题。

4、在多网卡主机上分配网站上线时尽量考虑网卡负载，平衡网卡流量。

5、网站程序目录权限设置为755。

6、FTP用户名使用“申请人姓名@网站域名”，便于管理。

7、转移数据库尽量使用导出为sql文件。如果数据库太大不方便导出导入操作，可以在关闭mysql服务之后复制数据库文件，但这种做法无法恢复数据库中innoDB类型的表。

8、在收藏夹中收藏所有phpmyadmin的地址，定期打开所有phpmyadmin，检查是否正常运行。

9、转移网站时留意目录属性，尤其是跨平台转移时。网站转移后先通过添加hosts来访问，没有问题后再改域名指向。

10、对服务器的任何操作请做备份，确认一切OK之后再做清理。对于删除操作不要擅做主张。

11、服务器不能通过ssh连接上时打开其power panel，若power panel不能控制，请联系主机提供商客服。

12、手机请7×24小时开机，收到短信报警先打开网站确认是否确实出问题。连接上服务器后检查进程，检查资源使用，养成每天检查服务器的习惯。

13、Linux系统出现任何问题都是配置问题。如果必要请勿重启服务器。发现问题查日志，修改对应配置之后重启该项服务。

14、对服务器的任何操作请勿影响同事正常工作。

15、经常检查日志，检查脚本，看是否有不完善之处。

16、没事多练练正则表达式，多看看命令行，有好处。

17、以下命令要滚瓜烂熟：find grep sed awk top ps netstat ifconfig xargs egrep crontab，但不仅限于此。

18、熟悉mysql的命令，在phpmyadmin无法打开时只能用mysql的命令。

19、发现网站被挂黑链时，不要做任何修改，通知相关同事暂停修改站点。检查日志分析入侵途径，尽量寻找入侵者信息。可以有以下几个获取信息的途径：通过服务器记录下的IP，检查IP的地理位置，检查黑链中的域名，包括IP和地理位置，以及它们的whois相关信息，其中有些会有注册人，如果链接中注册人都是同一个，那可以基本肯定就是这个人，通过一些途径解决这个问题。

20、被挂马时，保存马之后分析马的特性。修改其源文件，添加短信报警内容，放在原位，如果对方再连接可以得到报警。当然别忘了找一下系统漏洞，把漏洞补好。

21、胆大心细，要有耐心。

22、不要将带有用户名密码的文档发送给任何人。

23、有问题多查文档，或者Google之。


