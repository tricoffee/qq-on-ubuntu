vim 多文件编辑（偶的linux笔记）

分类：

在Linux下，假若需要对多个文件的内容进行相互对照和参考，或需要将一个文件的某部分内容复制或粘贴到另一个文件中，可通过vim同时打开这些相关文件进行编辑。
通过vim打开的每个文件都对应着一个buffer（buffer是系统为打开的文件分配的内存空间），每个buffer都有一个id。

 
1.在同一窗口下显示多个文件

命令：vim filename1 filename2

说明：上述命令同时打开了filename1，filename2两个文件，不过文件filename1的内容将占据整个vim窗口，要想在各个文件之间进行切换，我们可通过如下命令
：n    切换到下一个文件
：N   切换到上一个文件
：n filename2   切换到文件filename2

我们提到每个打开的文件都对应着一个buffer，故可通过切换buffer来达到切换文件的目的，如下
：ls  列出vim打开的所有文件的信息，包括文件名，buffer id等
：b2  切换到buffer id为2的buffer
:bn   切换到当前buffer的下一个buffer
:bp   切换当前buffer的前一个buffer
：bd 关闭当前buffer，对应文件也随之关闭
：bd2 关闭buffer id为2的buffer，对应文件也随之关闭

2.分割窗口，显示多个文件
对于在同一个窗口下打开多个文件，对于各文件之间内容的复制，剪切操作终究不方便，我们可使用命令对窗口进行分割，每个子窗口显示一个文件
命令：vim  -o filename1 filename2  水平分割窗口
      vim  -O  filename1 filename2 垂直分割窗口

我们可按ctrl ww在各窗口之间进行切换。

通过该种方式可非常方便各文件内容之间的复制与剪切操作，这里顺便简单提一下复制，剪切与粘贴操作命令
yy     复制光标所在行
dd     剪切光标所在行
5yy    复制从光标所在行开始计数的下五行文本
5dd    剪切从光标所在行开始计数的下五行文本
v（小写）      visual模式，通过上下左右键选择光标“扫过”的所有字符
V （大写）    visual line 模式，通过上下键选择光标“扫过”的所有行
ctrl + v        visual block 模式，通过上下左右键选择一个矩形文本
y    复制在visual模式， visual line模式和visual block 模式下选择的文本
d    剪切在visual模式， visual line模式和visual block 模式下 选择的文本
p(小写）  粘贴，  粘贴位置为光标所在行的下一行
P（大写）  粘贴，  粘贴位置为光标所在行的上一行
u： 撤销操作
r： 重做操作

 
提示：

a.假若我们通过vim打开了多个文件后，想在不关闭vim的情况下继续打开其他文件，如文件file，可在vim中使用如下命令：
      ：e  file   不会分割窗口
      ：sp  file  将会水平分割窗口
      ：vsp  file  将会垂直分割窗口

 b. vim和shell之间切换
       ：shell   切换到shell，此时vim在后台运行，在shell中输入命令exit，切换回vim

 
c.  在vim中执行shell命令（不切换到shell）
      ：!command        在执行的命令前加上！，如!ls ，!ls -a
      :  r  !command       将command命令的执行结果插入到文本当前行的下一行
      :  3  !command      将文本中第三行的内容输入到命令command中进行处理，并将第三行的内容替换为命令的执行结果
      ：1,3   !command    将文本中第一行到第三行的内容输入到命令command中进行处理，并将第一行到第三行的内容替换为命令的执行结果
      :  3  w !command      将文本中第三行的内容输入到命令command中进行处理，不改变当前编辑文件的内容.
      ：1,3  w  !command    将文本中第一行到第三行的内容输入到命令command中进行处理，不改变当前编辑文件的内容




2，文件操作：

修改当前操作目录：　
:cd 目录路径
　　

新建文件，
:new 文件名.后缀
新建后，记得使用:w保存，否则直接关闭不会产生文件;
如果你录入了内容，关闭的时候会提醒你保存。


保存文件，
:w 文件名.txt
:w　储存正在编辑的文件，如下图。存储时要带着扩展名，不然存下来的文件就没有扩展名。只输入:w 后面不带文件名称，将保存当前编辑的文件。


打开文件，打开文件有西面几种情况和方式，
第一种方式，
:e 文件名
可以带文件路径；
可以使用tab键进行文件夹名称和文件名称的自动补全，可以多次按tab，直到找到需要的。
这会在当前光标所在的窗口内打开文件，如下图。
草考上面新建文件的窗口会发现不同。

第二种使用vim打开文件的方式，
vi flname1 flname2
可以同时打开多个文件；
只打开一个文件时，操作结果和":e"命令相同。

第三种使用vim打开文件的方式，
:split 文件
会将当前窗体分为多个区域，在新的区域打开文件。

第四种打开方式：
可以在其它操作命令前加tab,
如,":tabnew 文件名“，":tabe 文件名”，
这将在新的分页中打开文件，见如下图


　3，文件间的切换：

第一种方式："ctrl + w"
:e#或Ctrl + 6 编辑前一个档案；<br>这会在当前区域编辑前一个文档，这不会出现a.txt
ctrl + w 切换到当前窗口中的不同区域的文件，所以下图中使用ctrl + w 也不会切换到a.txt ；<br>这会将光标切换到不同的区域 

第二种方式：":ls"然后":e#编号"
先使用":ls"查看已经打开的文件列表和编号，
然后使用":e#编号"切换需要编辑的文件。
在:ls中各文件的编号在未离开vim前是不会变的;<br>这可以切换到a.txt进行编辑。
　　

4,修改文件名称

操作命令是：":f 新的文件名称"
:f 新的文件名称

　　
5,保存和退出
:w 保存不退出<br>:q 退出文件
:wq 保存并退出
:q! 不保存并退出
:x 退出，如果文件更改则保存
shift + Z +Z  退出，如果文件更改则保存（按住Shift，再按两次z）




[end]
